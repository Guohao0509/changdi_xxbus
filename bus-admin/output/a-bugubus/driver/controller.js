app.controller("DriverListController",function($rootScope,$scope,$http,$state,$localStorage,$tableListService,$myHttpService){var options={searchFormId:"J_search_form",listUrl:"api/driver/queryDriversByKeyword.htm"};$tableListService.init($scope,options),$tableListService.get(),$scope.delete=function(item){layer.confirm("您确定要删除吗？",{icon:3,title:"提示"},function(){$myHttpService.post("api/driver/deleteDriver.htm",item,function(){$state.go("app.driver.list",{},{reload:!0}),layer.msg("删除成功！",{offset:"100px"})})},function(index){layer.close(index)})}}),app.controller("DriverEditController",function($tableListService,$rootScope,$scope,$myHttpService,$state,$localStorage,$stateParams,$filter,md5,$timeout){if($scope.editMode=!!$stateParams.id,$scope.driver={},$scope.driver.company="0",$scope.editMode){var options={searchFormId:"J_search_form",size:"9999",listUrl:"api/unit/queryUnitlistByKeyword",multiTable:"companyList",callback:function(){$scope.driver={driverid:$stateParams.id},$myHttpService.post("api/driver/queryDriverInfo.htm",$scope.driver,function(data){$scope.driver=data.driver},function(){$timeout(function(){$state.go("app.driver.list")},3e3)})}};$tableListService.init($scope,options),$tableListService.get(),$scope.submit=function(){$myHttpService.post("api/driver/updateDriverInfo.htm",$scope.driver,function(){layer.msg("修改成功！",{offset:"100px"}),$state.go("app.driver.list")},function(){$state.go("app.driver.list")})},$scope.delete=function(item){layer.confirm("您确定要删除吗？",{icon:3,title:"提示"},function(){$myHttpService.post("api/driver/deleteDriver.htm",item,function(){layer.msg("删除成功！",{offset:"100px"}),$state.go("app.driver.list",{},{reload:!0})})},function(index){layer.close(index)})}}else{var options={searchFormId:"J_search_form",size:"9999",listUrl:"api/unit/queryUnitlistByKeyword",multiTable:"companyList"};$tableListService.init($scope,options),$tableListService.get(),$scope.driver={city:"武汉市",sex:"男"},$scope.submit=function(){$myHttpService.post("api/driver/insertDriver.htm",$scope.driver,function(){layer.msg("添加成功！",{offset:"100px"}),$state.go("app.driver.add",{},{reload:!0})})}}});