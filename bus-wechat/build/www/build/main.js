webpackJsonp([0],{103:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var o=n(0),i=n(3),r=n(104),s=n(203),a=n(18),p=n(14),c=n(12),d=n(16),l=(n.n(d),this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s}),h=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){return function(){}}(),g=function(){function e(e,t,n,o,i,r){this.navCtrl=e,this.navParams=t,this.http=n,this.loading=o,this.httpService=i,this.toastCtrl=r,this.data=new u}return e.prototype.ionViewWillEnter=function(){var e=this;this.userInfo=window.global.config.user.userInfo,this.pipesn=this.navParams.get("pipesn"),this.md5=this.navParams.get("md5");var t=window.global.config.user.userInfo.userid,n=window.global.config.user.userInfo.token;if(this.userInfo){var o=this.loading.create({content:"请稍后..."});o.present(),void 0!==this.pipesn&&":pipesn"!==this.pipesn?this.httpService.postRequest("/api/happyevadmin/charging/inputPipesn.htm",{userid:t,token:n,pipesn:this.pipesn}).then(function(t){var n=t.header.code.toString(16);if(e.code=n.substr(n.length-2,2).toUpperCase(),"FF"==n.substr(n.length-2,2).toUpperCase())setTimeout(function(){e.data=t.body.pipeinfo,e.posts=t.body.portlist,console.log(e.data,t.body,t),o.dismiss()},1e3);else if("FC"==n.substr(n.length-2,2).toUpperCase())o.dismiss();else{o.dismiss();var i=e.toastCtrl.create({message:t.header.info,duration:2e3,position:"top"});i.onDidDismiss(function(){e.navCtrl.pop()}),i.present()}}):void 0!==this.md5&&":md5"!==this.md5&&this.httpService.postRequest("/api/happyevadmin/charging/scanPipeCode.htm",{userid:t,token:n,md5:this.md5}).then(function(t){var n=t.header.code.toString(16);if(e.code=n.substr(n.length-2,2).toUpperCase(),"FF"==n.substr(n.length-2,2).toUpperCase())setTimeout(function(){e.data=t.body.pipeinfo,e.posts=t.body.portlist,console.log(e.data,t.body,t),o.dismiss()},1e3);else if("FC"==n.substr(n.length-2,2).toUpperCase())o.dismiss();else{o.dismiss();var i=e.toastCtrl.create({message:t.header.info,duration:2e3,position:"top"});i.onDidDismiss(function(){e.navCtrl.pop()}),i.present()}})}},e.prototype.goLogin=function(){this.navCtrl.push(a.a)},e.prototype.goElectricityPrice=function(){void 0!==this.pipesn&&":pipesn"!==this.pipesn?this.navCtrl.push(s.a,{pipesn:this.pipesn}):void 0!==this.md5&&":md5"!==this.md5&&this.navCtrl.push(s.a,{md5:this.md5})},e.prototype.cancel=function(){this.navCtrl.pop()},e.prototype.sure=function(){var e=this,t=window.global.config.user.userInfo.userid,n=window.global.config.user.userInfo.token;if(void 0==this.getRadio)this.toastCtrl.create({message:"请选择充电枪",duration:2e3,position:"top"}).present();else{var o=this.loading.create({content:"请稍后..."});o.present(),this.httpService.postRequest("/api/happyevadmin/charging/startCharging.htm",{userid:t,token:n,portid:this.getRadio}).then(function(t){var n=t.header.code.toString(16);if("FF"==n.substr(n.length-2,2).toUpperCase())o.dismiss(),e.navCtrl.push(r.a,{chagorderid:t.body.orderid}),console.log(t);else if("FC"==n.substr(n.length-2,2).toUpperCase())o.dismiss(),(i=e.toastCtrl.create({message:"登录失效,请重新登陆",duration:2e3,position:"top"})).onDidDismiss(function(){e.navCtrl.push(a.a)}),i.present();else{o.dismiss();var i=e.toastCtrl.create({message:t.header.info,duration:2e3,position:"top"});i.onDidDismiss(function(){e.navCtrl.pop()}),i.present()}})}},e}();g=l([Object(i.e)(),Object(o.n)({selector:"page-charge",template:'\x3c!--\n  Generated template for the ChargePage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n\n \n\n</ion-header>\n\n\n<ion-content style="background:#f0eff5;" >\n  <div *ngIf="!userInfo || code==\'FC\'" class="checkLogin"> \x3c!-- 两个ngIf的条件必须对应相等时才会显示效果 --\x3e\n    <p>您还未登录，请先登录</p>\n    <button ion-button block type="button" color="secondary" (click)="goLogin()">登录</button>\n  </div>\n  <div *ngIf="userInfo && code==\'FF\'"> \x3c!-- 两个ngIf的条件必须对应相等时才会显示效果 --\x3e\n\n    <div [ngStyle]="{\'visibility\':data && posts?\'hidden\':\'visible\'}" style="position:absolute;top:0;right:0;bottom:0;left:0;z-index:999;background:#f0eff5;"></div>                                                                                                                                     \n    <ion-item style="margin-top:30px;height:134px;border-top: 0.5px solid #e5e5e5;border-bottom: 0.5px solid #e5e5e5;">\n      <ion-list class="charge-top"><span>电桩编号</span><span>{{data.pipepn}}</span></ion-list>\n      <ion-list class="charge-top"><span>功率</span><span>{{data.power}}KW</span></ion-list>\n      <ion-list class="charge-top"><span>状态</span><span *ngIf = "data.chargingable == 1">可充电</span>\n        <span *ngIf = "data.chargingable == 0">不可充电</span>\n      </ion-list>\n      <ion-list class="charge-top" style="margin:0;height:33.5px" (click)="goElectricityPrice()"><span>价格</span><a>{{data.currentprice}}元/度<ion-icon name="arrow-forward"></ion-icon></a></ion-list>\n    </ion-item>\n    <p style="background: #f0eff5;height: 35px;padding-left:16px;line-height:35px;font-size:12px;color:#888888;margin:0;">充电端口</p>\n\n    <ion-list radio-group [(ngModel)]="getRadio" style="border-top: 0.5px solid #e5e5e5;border-bottom: 0.5px solid #e5e5e5;background: #ffffff">\n      <ion-item style="height:35px;" *ngFor ="let post of posts">\n        <ion-label class="chargeRad" style="line-height:35px;">\n          <span>充电枪{{post.portnum}}</span>\n          <span *ngIf = "post.portchargestatus == 0">离线</span>\n          <span *ngIf = "post.portchargestatus == 1&&post.portstatus == 0">未插枪</span>\n          <span *ngIf = "post.portchargestatus == 1&&post.portstatus == 1">插枪</span>\n          \x3c!-- <span *ngIf = "post.portchargestatus == 1&&post.portstatus == 2">故障</span> --\x3e\n          <span *ngIf = "post.portchargestatus == 2">充电中</span>\n          <span *ngIf = "post.portchargestatus == 3">故障</span>\n        </ion-label>\n        <ion-radio  [value]="post.portid" class="charge"></ion-radio>\n      </ion-item>\n    </ion-list>\n    \x3c!-- <button ion-button  color="light" (click)="cancel()" class="btn-can">取消</button> --\x3e\n    <div class="btn-sur">\n      <button ion-button block color="secondary" (click)="sure()">确定</button>\n    </div>\n  </div>\n</ion-content>\n\n\x3c!-- <ion-content  *ngIf = "!data && !posts">\n  <div style="background:#f0eff5;width:100%;height:100%;">\n\n  </div>\n</ion-content> --\x3e\n\n\x3c!-- <ion-list radio-group style="height:105px">\n    <ion-item style="height:35px;border-top: 0.5px solid #e5e5e5;">\n      <ion-label class="chargeRad" style="line-height:35px;"><span>充电枪1</span><span>充电中</span></ion-label>\n      <ion-radio  value="1" class="charge"></ion-radio>\n    </ion-item>\n    <ion-item style="height:35px;">\n      <ion-label class="chargeRad" style="line-height:35px;"><span>充电枪2</span><span>已插枪</span></ion-label>\n      <ion-radio value="2" class="charge"></ion-radio>\n    </ion-item>\n    <ion-item style="height:35px;border-bottom: 0.5px solid #e5e5e5;">\n      <ion-label class="chargeRad" style="line-height:35px;"><span>充电枪3</span><span>未插枪</span></ion-label>\n      <ion-radio value="3" class="charge"></ion-radio>\n    </ion-item>\n  </ion-list> --\x3e\n\n\n\n\x3c!-- <form [formGroup]="chargeForm" (ngSubmit)="charge(chargeForm.value)">\n      <ion-list>\n        <span>充电枪1</span>\n        <ion-item>\n          <ion-label>充电中</ion-label>\n          <ion-input type="radio" name="options" [value]="1" [(ngModel)]="model.options"></ion-input>\n        </ion-item>\n      </ion-list>\n      <ion-list>\n        <span>充电枪2</span>\n        <ion-item>\n          <ion-label>已插枪</ion-label>\n          <ion-input type="radio" name="options" [value]="2" [(ngModel)]="model.options"></ion-input>\n        </ion-item>\n      </ion-list>\n      <ion-list>\n        <span>充电枪3</span>\n        <ion-item>\n          <ion-label>未插枪</ion-label>\n          <ion-input type="radio" name="options" [value]="3" [(ngModel)]="model.options"></ion-input>\n        </ion-item>\n      </ion-list>\n      <ion-item>\n        <button ion-button block color="Light" (click)="cancel()">取消</button>\n        <button ion-button block color="secondary" type="submit" [disabled]="!chargeForm.valid">确定</button>\n      </ion-item>\n    </form> --\x3e\n'}),h("design:paramtypes",[i.g,i.h,c.a,i.f,p.a,i.j])],g)},104:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var o=n(0),i=n(3),r=n(202),s=n(105),a=n(12),p=n(16),c=(n.n(p),n(14)),d=n(18),l=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},h=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){return function(){}}(),g=function(){function e(e,t,n,o,i,r){this.navCtrl=e,this.navParams=t,this.http=n,this.httpService=o,this.loading=i,this.toastCtrl=r,this.data=new u}return e.prototype.ionViewWillEnter=function(){var e=this;this.chagorderid=this.navParams.get("chagorderid"),this.chargeOrder=this.navParams.get("chargeOrder");var t=window.global.config.user.userInfo.userid,n=window.global.config.user.userInfo.token,o=this.loading.create({content:"请稍后..."});o.present(),void 0!==this.chagorderid&&":chagorderid"!==this.chagorderid?this.httpService.postRequest("/api/happyevadmin/charging/cycleQueryChagorderInfo.htm",{userid:t,token:n,chagorderid:this.chagorderid}).then(function(t){var n=t.header.code.toString(16);if(e.code=n.substr(n.length-2,2).toUpperCase(),"FF"==n.substr(n.length-2,2).toUpperCase()){e.data=t.body.chargeOrder,console.log(t);var i=Math.floor((e.data.endDate-e.data.startDate)/1e3);e.hour=Math.floor(i/3600),e.minute=Math.floor(i/60-60*e.hour),o.dismiss()}else"FC"==n.substr(n.length-2,2).toUpperCase()?o.dismiss():(o.dismiss(),e.toastCtrl.create({message:t.header.info,duration:2e3,position:"top"}).present())}):void 0!==this.chargeOrder&&":chargeOrder"!==this.chargeOrder&&this.httpService.postRequest("/api/happyevadmin/charging/cycleQueryChagorderInfo.htm",{userid:t,token:n,chagorderid:this.chargeOrder}).then(function(t){var n=t.header.code.toString(16);if(e.code=n.substr(n.length-2,2).toUpperCase(),"FF"==n.substr(n.length-2,2).toUpperCase()){e.data=t.body.chargeOrder,console.log(t);var i=Math.floor((e.data.endDate-e.data.startDate)/1e3);e.hour=Math.floor(i/3600),e.minute=Math.floor(i/60-60*e.hour),o.dismiss()}else"FC"==n.substr(n.length-2,2).toUpperCase()?o.dismiss():(o.dismiss(),e.toastCtrl.create({message:t.header.info,duration:2e3,position:"top"}).present())}),void 0!==this.chagorderid&&":chagorderid"!==this.chagorderid?this.timer=setInterval(function(){e.httpService.postRequest("/api/happyevadmin/charging/cycleQueryChagorderInfo.htm",{userid:t,token:n,chagorderid:e.chagorderid}).then(function(t){var n=t.header.code.toString(16);if(e.code=n.substr(n.length-2,2).toUpperCase(),"FF"==n.substr(n.length-2,2).toUpperCase()){e.data=t.body.chargeOrder,console.log(t);var o=Math.floor((e.data.endDate-e.data.startDate)/1e3);e.hour=Math.floor(o/3600),e.minute=Math.floor(o/60-60*e.hour)}else"FC"==n.substr(n.length-2,2).toUpperCase()?clearInterval(e.timer):(clearInterval(e.timer),e.toastCtrl.create({message:t.header.info,duration:2e3,position:"top"}).present())})},15e3):void 0!==this.chargeOrder&&":chargeOrder"!==this.chargeOrder&&(this.timer=setInterval(function(){e.httpService.postRequest("/api/happyevadmin/charging/cycleQueryChagorderInfo.htm",{userid:t,token:n,chagorderid:e.chargeOrder}).then(function(t){var n=t.header.code.toString(16);if(e.code=n.substr(n.length-2,2).toUpperCase(),"FF"==n.substr(n.length-2,2).toUpperCase()){e.data=t.body.chargeOrder,console.log(t);var o=Math.floor((e.data.endDate-e.data.startDate)/1e3);e.hour=Math.floor(o/3600),e.minute=Math.floor(o/60-60*e.hour)}else"FC"==n.substr(n.length-2,2).toUpperCase()?clearInterval(e.timer):(clearInterval(e.timer),e.toastCtrl.create({message:t.header.info,duration:2e3,position:"top"}).present())})},15e3))},e.prototype.ionViewDidLeave=function(){clearInterval(this.timer)},e.prototype.consumerInfo=function(){void 0!==this.chagorderid&&":chagorderid"!==this.chagorderid?this.navCtrl.push(r.a,{chagorderid:this.chagorderid}):void 0!==this.chargeOrder&&":chargeOrder"!==this.chargeOrder&&this.navCtrl.push(r.a,{chagorderid:this.chargeOrder})},e.prototype.stopCharge=function(){var e=this,t=window.global.config.user.userInfo.userid,n=window.global.config.user.userInfo.token,o=this.loading.create({content:"正在结算中,请稍后..."});o.present(),void 0!==this.chagorderid&&":chagorderid"!==this.chagorderid?this.httpService.postRequest("/api/happyevadmin/charging/stopCharging.htm",{userid:t,token:n,chagorderid:this.chagorderid,usebonuspoint:0}).then(function(i){var r=i.header.code.toString(16);if("FF"==r.substr(r.length-2,2).toUpperCase())o.dismiss(),e.navCtrl.push(s.a,{chagorderid:e.chagorderid});else if("FC"==r.substr(r.length-2,2).toUpperCase())o.dismiss(),(p=e.toastCtrl.create({message:"登录失效,请重新登陆",duration:2e3,position:"top"})).onDidDismiss(function(){e.navCtrl.push(d.a)}),p.present();else if("FA"==r.substr(r.length-2,2).toUpperCase()){var a=20;e.stopTimer=setInterval(function(){a--,e.httpService.postRequest("/api/happyevadmin/charging/queryChargeOrderByid.htm",{userid:t,token:n,chagorderid:e.chagorderid}).then(function(t){e.orderstatus=t.body.orderstatus,"2"==e.orderstatus&&a>=0?(o.dismiss(),clearInterval(e.stopTimer),e.navCtrl.push(s.a,{chagorderid:e.chagorderid})):a<0&&(o.dismiss(),clearInterval(e.stopTimer),e.toastCtrl.create({message:"订单结算中,请稍后重试",duration:2e3,position:"top"}).present())})},1e3)}else{o.dismiss();var p=e.toastCtrl.create({message:i.header.info,duration:2e3,position:"top"});p.present()}}):void 0!==this.chargeOrder&&":chargeOrder"!==this.chargeOrder&&this.httpService.postRequest("/api/happyevadmin/charging/stopCharging.htm",{userid:t,token:n,chagorderid:this.chargeOrder,usebonuspoint:0}).then(function(i){var r=i.header.code.toString(16);if("FF"==r.substr(r.length-2,2).toUpperCase())o.dismiss(),e.navCtrl.push(s.a,{chagorderid:e.chargeOrder});else if("FC"==r.substr(r.length-2,2).toUpperCase())o.dismiss(),(p=e.toastCtrl.create({message:"登录失效,请重新登陆",duration:2e3,position:"top"})).onDidDismiss(function(){e.navCtrl.push(d.a)}),p.present();else if("FA"==r.substr(r.length-2,2).toUpperCase()){var a=20;e.stopTimer=setInterval(function(){a--,e.httpService.postRequest("/api/happyevadmin/charging/queryChargeOrderByid.htm",{userid:t,token:n,chagorderid:e.chargeOrder}).then(function(t){e.orderstatus=t.body.orderstatus,"2"==e.orderstatus&&a>=0?(o.dismiss(),clearInterval(e.stopTimer),e.navCtrl.push(s.a,{chagorderid:e.chargeOrder})):a<0&&(o.dismiss(),clearInterval(e.stopTimer),e.toastCtrl.create({message:"订单结算中,请稍后重试",duration:2e3,position:"top"}).present())})},1e3)}else{o.dismiss();var p=e.toastCtrl.create({message:i.header.info,duration:2e3,position:"top"});p.present()}})},e.prototype.goLogin=function(){this.navCtrl.push(d.a)},e}();g=l([Object(i.e)(),Object(o.n)({selector:"page-charge-state",template:'\x3c!--\n  Generated template for the ChargeStatePage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n\n  \x3c!-- <ion-navbar>\n    <ion-title>charge-state</ion-title>\n  </ion-navbar> --\x3e\n\n</ion-header>\n\n\x3c!-- 两个ngIf的条件必须对应相等时才会显示效果 --\x3e\n<ion-content>\n  <div *ngIf="code==\'FC\'" class="checkLogin"> \n    <p>您还未登录，请先登录</p>\n    <button ion-button block type="button" color="secondary" (click)="goLogin()">登录</button>\n  </div>\n\n  <div *ngIf="code!=\'FC\'" style="height: 100%;width: 100%;"> \n    \x3c!-- <div [ngStyle]="{\'visibility\':code==\'FF\'?\'hidden\':\'visible\'}" style="position:absolute;top:0;right:0;bottom:0;left:0;z-index:999;background:#f0eff5;"></div> --\x3e\n\n    <div class="charge-num">\n      <div>\n        <div>{{data.realsoc}}<span>%</span></div> \n      </div> \n    </div>\n    <ion-list class="charge-time" style="margin-top:30px;"><span>充电时间：</span><span>{{hour}}小时{{minute}}分钟</span></ion-list>\n    <ion-list class="charge-time"><span>充电价格：</span><span>{{data.realprice}}元/度</span></ion-list>\n    <ion-list class="charge-time"  (click)="consumerInfo()">\n      <span>消费金额：</span>\n      <span>{{data.totalfee}}元</span>\n      <a><ion-icon name="arrow-round-forward"></ion-icon></a>\n    </ion-list>\n    <div class="stop-charge">\n      <button ion-button outline=true color="dark" (click)="stopCharge()">停止充电</button>\n    </div>\n\n  </div>\n\n  \x3c!-- <ion-grid class="charge-num">\n    <ion-row>\n      <ion-col width-26></ion-col>\n      <ion-col width-48><div>100</div></ion-col>\n      <ion-col width-26></ion-col>\n    </ion-row>\n  </ion-grid> --\x3e\n</ion-content>\n\n\n'}),h("design:paramtypes",[i.g,i.h,a.a,c.a,i.f,i.j])],g)},105:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),i=n(3),r=n(12),s=n(16),a=(n.n(s),n(14)),p=n(18),c=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){return function(){}}(),h=function(){function e(e,t,n,o,i,r){this.navCtrl=e,this.navParams=t,this.http=n,this.httpService=o,this.loading=i,this.toastCtrl=r,this.data=new l}return e.prototype.ionViewWillEnter=function(){var e=this,t=this.loading.create({content:"请稍后..."});t.present(),this.chagorderid=this.navParams.get("chagorderid"),this.historyOrder=this.navParams.get("historyOrder");var n=window.global.config.user.userInfo.userid,o=window.global.config.user.userInfo.token;void 0!==this.chagorderid&&":chagorderid"!==this.chagorderid?this.httpService.postRequest("/api/happyevadmin/charging/queryChargeOrderByid.htm",{userid:n,token:o,chagorderid:this.chagorderid}).then(function(n){var o=n.header.code.toString(16);if(e.code=o.substr(o.length-2,2).toUpperCase(),"FF"==o.substr(o.length-2,2).toUpperCase())setTimeout(function(){e.posts=n.body,e.data=n.body,e.data.pipepn?e.pn=e.data.pipepn:e.pn=e.data.pipesn;var o=Math.floor(e.data.chargingtime/60),i=e.data.chargingtime-60*o;e.hour=o,e.minute=i,t.dismiss()},1e3);else if("FC"==o.substr(o.length-2,2).toUpperCase())t.dismiss();else{t.dismiss();var i=e.toastCtrl.create({message:n.header.info,duration:2e3,position:"top"});i.onDidDismiss(function(){e.navCtrl.pop()}),i.present()}}):void 0!==this.historyOrder&&":historyOrder"!==this.historyOrder&&this.httpService.postRequest("/api/happyevadmin/charging/queryChargeOrderByid.htm",{userid:n,token:o,chagorderid:this.historyOrder}).then(function(n){var o=n.header.code.toString(16);if(e.code=o.substr(o.length-2,2).toUpperCase(),"FF"==o.substr(o.length-2,2).toUpperCase())setTimeout(function(){e.posts=n.body,e.data=n.body,e.data.pipepn?e.pn=e.data.pipepn:e.pn=e.data.pipesn;var o=Math.floor(e.data.chargingtime/60),i=e.data.chargingtime-60*o;e.hour=o,e.minute=i,t.dismiss()},1e3);else if("FC"==o.substr(o.length-2,2).toUpperCase())t.dismiss();else{t.dismiss();var i=e.toastCtrl.create({message:n.header.info,duration:2e3,position:"top"});i.onDidDismiss(function(){e.navCtrl.pop()}),i.present()}})},e.prototype.goLogin=function(){this.navCtrl.push(p.a)},e}();h=c([Object(i.e)(),Object(o.n)({selector:"page-order-detail",template:'\x3c!--\n  Generated template for the OrderDetailPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n\n</ion-header>\n\n\n<ion-content style="background:#f0eff5;">\n  <div *ngIf="code==\'FC\'" class="checkLogin"> \x3c!-- 两个ngIf的条件必须对应相等时才会显示效果 --\x3e\n    <p>您还未登录，请先登录</p>\n    <button ion-button block type="button" color="secondary" (click)="goLogin()">登录</button>\n  </div>\n  <div *ngIf="code==\'FF\'"> \x3c!-- 两个ngIf的条件必须对应相等时才会显示效果 --\x3e\n\n    <div [ngStyle]="{\'visibility\':posts?\'hidden\':\'visible\'}" style="position:absolute;top:0;right:0;bottom:0;left:0;z-index:999;background:#f0eff5;"></div>\n\n    <ul>\n      <li>\n        <div>\n          <span>订单编号：</span>\n          <span>{{data.chagorderid}}</span>\n        </div>\n        <div>\n          <span>充电电量：</span>\n          <span>{{data.totalpower}}度</span>\n        </div>\n        <div>\n          <span>充电时长：</span>\n          <span>{{hour}}小时{{minute}}分</span>\n        </div>\n        <div>\n          <span>消费金额：</span>\n          <span>{{data.totalfee}}元</span>\n        </div>\n        <div>\n          <span>积分抵扣：</span>\n          <span>{{data.usedbonus}}元</span>\n        </div>\n        <div>\n          <span>获得积分：</span>\n          <span>{{data.getbonus}}分</span>\n        </div>\n        <div>\n          <span>积分余额：</span>\n          <span>{{data.realbonus}}分</span>\n        </div>\n        <div>\n          <span>账户余额：</span>\n          <span>{{data.currentBalance}}元</span>\n        </div>\n        <div>\n          <span>电桩编码：</span>\n          <span>{{pn}}</span>\n        </div>\n      </li>\n    </ul>\n  </div>\n</ion-content>\n'}),d("design:paramtypes",[i.g,i.h,r.a,a.a,i.f,i.j])],h)},113:function(e,t){function n(e){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+e+"'.")})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=113},14:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(0),i=n(12),r=n(275),s=(n.n(r),this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s}),a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e){this.http=e}return e.prototype.postRequest=function(e,t,n){var o=this;return this.http.post(e,t,n).map(function(e){return e.json()}).toPromise().then(function(e){return o.handleSuccess(e)}).catch(function(e){return o.handleError(e)})},e.prototype.handleSuccess=function(e){var t=e.header.code.toString(16);return e&&"FF"!=t.substr(t.length-2,2).toUpperCase()&&console.log(e.header.info),e},e.prototype.handleError=function(e){var t="请求失败,请稍后重试";0==e.status&&(t="请求地址错误,请稍后重试"),400==e.status&&(t="请求无效,请稍后重试",console.log("请检查参数类型是否匹配")),404==e.status&&(t="请求资源不存在,请稍后重试",console.error(t+",请检查路径是否正确")),console.log(e),alert(t)},e}();p=s([Object(o.B)(),a("design:paramtypes",[i.a])],p)},155:function(e,t){function n(e){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+e+"'.")})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=155},18:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(0),i=n(3),r=n(13),s=n(200),a=(n.n(s),n(12)),p=n(16),c=(n.n(p),n(201)),d=n(14),l=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},h=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,n,o,i,s,a){this.navCtrl=e,this.formBuilder=t,this.navParams=n,this.http=o,this.httpService=i,this.loading=s,this.toastCtrl=a,this.loginForm=t.group({username:["",r.f.compose([r.f.required,r.f.pattern("^(13[0-9]|15[012356789]|17[03678]|18[0-9]|14[57])[0-9]{8}$ || ^d{8}$")])],password:["",r.f.compose([r.f.required,r.f.minLength(6)])]}),this.username=this.loginForm.controls.username,this.password=this.loginForm.controls.password}return e.prototype.login=function(e){var t=this,n=s.Md5.hashStr(this.password.value).toString(),o=window.global.config.user.openId,i=this.loading.create({content:"请稍后..."});i.present(),this.httpService.postRequest("/auth/login",{username:this.username.value,loginpwd:n,openid:o}).then(function(e){t.data=e,console.log(t.data),e.body?(i.dismiss(),window.global.config.user.userInfo=e.body,t.navCtrl.pop()):(i.dismiss(),t.toastCtrl.create({message:e.header.info,duration:2e3,position:"top"}).present())})},e.prototype.registerpage=function(){this.navCtrl.push(c.a)},e}();u=l([Object(o.n)({selector:"page-login",template:'<ion-header>\n  \n</ion-header>\n\n\x3c!-- style="background:url(\'../../assets/imgs/weixinLogin1.jpg\') repeat left top;background-size:100% 100%;" --\x3e\n\n<ion-content padding style="background:#696969;">\n  <form [formGroup]="loginForm" (ngSubmit)="login(loginForm.value)" style="position:relative;">\n    <ion-item [class.error]="!username.valid && username.touched" style="margin-top:86px;">\n        <ion-input type="tel" placeholder="请输入手机号码或者账号" value="" [formControl]="username" clearInput=true></ion-input>\n    </ion-item>\n\n    \x3c!-- 控件不能为空和控件是否被访问过 --\x3e\n    <div *ngIf="username.hasError(\'required\') && username.touched" class="error-message" style="position:absolute;top:48px;left:0;">* 请输入用户名</div>\n    \x3c!-- 控件里面输入内容最小位数,最大位数以及正则和是否被访问过 --\x3e\n    <div *ngIf="(username.hasError(\'pattern\')) && username.touched" class="error-message" style="position:absolute;top:48px;left:0;">* 请输入正确的电话号码或者账号</div>\n    \n    <ion-item style="margin-top:20px;">\n        <ion-input type="password" placeholder="请输入密码" value="" [formControl]="password" clearInput=true></ion-input>\n    </ion-item>\n\n    \x3c!-- 控件不能为空和控件是否被访问过 --\x3e\n    <div *ngIf="password.hasError(\'required\') && password.touched" class="error-message" style="position:absolute;top:108px;left:0;">* 请输入密码</div>\n    \x3c!-- 控件里面输入内容最小位数,是否被访问过 --\x3e\n    <div *ngIf="(password.hasError(\'minlength\')) && password.touched" class="error-message" style="position:absolute;top:108px;left:0;">* 密码长度最少为六位</div>\n\n          \x3c!-- [disabled]="!loginForm.valid" form表单里面的控件是否有效 --\x3e\n    <button ion-button block color="secondary" type="submit" [disabled]="!loginForm.valid" class="btn">登录</button>\n  </form>\n  <a class="reg" (click)="registerpage()">注册</a>\n</ion-content>\n',providers:[d.a]}),h("design:paramtypes",[i.g,r.a,i.h,a.a,d.a,i.f,i.j])],u)},199:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var o=n(0),i=n(3),r=n(13),s=n(18),a=n(103),p=n(12),c=n(16),d=(n.n(c),n(14)),l=n(204),h=(n.n(l),this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s}),u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g=function(){function e(e,t,n,o,i,s){this.navCtrl=e,this.formBuilder=t,this.navParams=n,this.http=o,this.httpService=i,this.toastCtrl=s,this.inputForm=t.group({myInput:["",r.f.compose([r.f.required,r.f.minLength(14),r.f.maxLength(14),r.f.pattern("[A-Za-z0-9]{14}")])]}),this.myInput=this.inputForm.controls.myInput}return e.prototype.ionViewDidLoad=function(){},e.prototype.inputCodeGo=function(e){this.navCtrl.push(a.a,{pipesn:this.myInput.value})},e.prototype.goLogin=function(){this.navCtrl.push(s.a)},e.prototype.ionViewWillEnter=function(){this.userInfo=window.global.config.user.userInfo},e.prototype.goScan=function(){var e=this;this.httpService.postRequest("/api/happyevadmin/utils/getWechatJsSign.htm",{currenturl:"http://wxcharge.happyev.com/index?return=input#/input"}).then(function(t){console.log(t,t.body),wx.config({debug:!1,appId:t.body.appId,nonceStr:t.body.nonceStr,signature:t.body.signature,timestamp:t.body.timestamp,jsApiList:["scanQRCode"]});var n=e;wx.ready(function(){wx.scanQRCode({needResult:1,scanType:["qrCode","barCode"],success:function(e){var t=e.resultStr;n.md5=new l.Buffer(t,"base64").toString().substr(17),n.navCtrl.push(a.a,{md5:n.md5})}})})})},e}();g=h([Object(o.n)({selector:"page-input",template:'<ion-header>\n\n  <div></div>\n\n</ion-header>\n\n<ion-content style="background:#696969;">\n\n  <div *ngIf="!userInfo" class="checkLogin">\n\n    <p>您还未登录，请先登录</p>\n\n    <button ion-button block type="button" color="secondary" (click)="goLogin()">登录</button>\n\n  </div>\n\n  <div *ngIf="userInfo" class="checkLogin" style="position:relative;">\n\n    <form [formGroup]="inputForm" (ngSubmit)="inputCodeGo(inputForm.value)">\n\n      <ion-item [class.error]="!myInput.valid && myInput.touched" style="margin-top:70px;">\n\n        <ion-input type="text" value="" [formControl]="myInput" placeholder="请输入电桩编号" clearInput=true></ion-input>\n\n      </ion-item>\n\n      <div *ngIf="(myInput.hasError(\'minlength\')) && myInput.touched" class="error-message" style="position:absolute;top:48px;left:0;">* 编码长度为十四位</div>\n\n      <button ion-button type="submit" color="secondary" [disabled]="!inputForm.valid" class="btn-input">确定</button>\n\n    </form>\n\n    <button ion-button type="button" color="secondary" (click)="goScan()" class="btn-scan">扫码充电</button>\n\n</div>\n\n</ion-content>\n\n  '}),u("design:paramtypes",[i.g,r.a,i.h,p.a,d.a,i.j])],g)},201:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),i=n(3),r=n(13),s=n(200),a=(n.n(s),n(12)),p=n(16),c=(n.n(p),n(14)),d=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t,n,o,i,s){this.navCtrl=e,this.formBuilder=t,this.http=n,this.httpService=o,this.loading=i,this.toastCtrl=s,this.registerForm=t.group({username1:["",r.f.compose([r.f.minLength(11),r.f.maxLength(11),r.f.required,r.f.pattern("^(13[0-9]|15[012356789]|17[03678]|18[0-9]|14[57])[0-9]{8}$")])],verificationCode:["",r.f.compose([r.f.required,r.f.minLength(4)])],password1:["",r.f.compose([r.f.required,r.f.minLength(6),r.f.maxLength(16)])],password2:["",r.f.compose([r.f.required,r.f.minLength(6),r.f.maxLength(16)])]}),this.username1=this.registerForm.controls.username1,this.verificationCode=this.registerForm.controls.verificationCode,this.password1=this.registerForm.controls.password1,this.password2=this.registerForm.controls.password2}return e.prototype.getCode=function(){var e=this,t=this.loading.create({content:"请稍后..."});t.present();var n=this.username1.value%this.username1.value.substring(1,4);console.log(n),this.httpService.postRequest("/api/happyevadmin/utils/getAuthcode.htm",{phone:this.username1.value,servicename:"registerUser",checkcode:n}).then(function(n){var o=n.header.code.toString(16);if("FF"==o.substr(o.length-2,2).toUpperCase()){t.dismiss();var i=60;e.disabled=!0,e.timer=setInterval(function(){i--,document.getElementById("verification").innerText=i+"秒后重试",i<=0&&(e.disabled=!1,document.getElementById("verification").innerText="获取验证码",clearInterval(e.timer),i=60)},1e3),(r=e.toastCtrl.create({message:"短信验证码发送成功",duration:2e3,position:"top"})).present()}else{t.dismiss();var r=e.toastCtrl.create({message:n.header.info,duration:2e3,position:"top"});r.present()}})},e.prototype.ionViewWillLeave=function(){clearInterval(this.timer)},e.prototype.register=function(e){var t=this;if(console.log(this.verificationCode.value),this.password1.value==this.password2.value){var n=s.Md5.hashStr(this.password1.value).toString(),o=window.global.config.user.openId,i=this.loading.create({content:"请稍后..."});i.present(),this.httpService.postRequest("/auth/register",{phone:this.username1.value,pwd:n,authcode:this.verificationCode.value,openid:o}).then(function(e){var n=e.header.code.toString(16);"FF"==n.substr(n.length-2,2).toUpperCase()?(i.dismiss(),window.global.config.user.userInfo=e.body,t.navCtrl.pop(),t.navCtrl.pop()):(i.dismiss(),t.toastCtrl.create({message:e.header.info,duration:2e3,position:"top"}).present())})}this.password1.value!=this.password2.value&&this.toastCtrl.create({message:"两次密码不一致",duration:2e3,position:"top"}).present()},e}();h=d([Object(o.n)({selector:"page-register",template:'\x3c!--\n  Generated template for the RegisterPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n\n \n</ion-header>\n\n\x3c!-- style="background:url(\'../../assets/imgs/weixinLogin1.jpg\') repeat left top;background-size:100% 100%;" --\x3e\n\n<ion-content padding style="background:#696969;">\n  <form [formGroup]="registerForm" (ngSubmit)="register(registerForm.value)" style="position:relative;">\n    <ion-item style="margin-top:86px;padding-left:16px;"  [class.error]="!username1.valid && username1.touched">\n      <ion-input type="tel" placeholder="请输入手机号码" value="" [formControl]="username1" clearInput=true></ion-input>\n    </ion-item>\n    <ion-item style="margin-top:20px;margin-bottom:20px;width: 58%;float: left;padding-left:16px;">\n      <ion-input type="number" placeholder="请输入验证码" value="" [formControl]="verificationCode" clearInput="true" ></ion-input>  \n    </ion-item>\n    <ion-item style="margin-top:20px;margin-bottom:20px;width: 38%;float: right;background: #dadada;text-align:center;">\n      <button type="button" color="Light" id="verification" [disabled]="disabled" (click)="getCode()" style="color: #007aff; font-size: 16px;">获取验证码</button>\n    </ion-item>\n    <ion-item style="padding-left:16px;">\n      <ion-input type="password" placeholder="设置6-16位登录密码" value="" [formControl]="password1" clearInput="true"></ion-input>\n    </ion-item>\n    <div *ngIf="(password1.hasError(\'minlength\')) && password1.touched" class="error-message" style="position:absolute;top:170px;left:0;">* 请输入六到十六位密码</div>\n    <ion-item style="margin-top:20px;padding-left:16px;">\n      <ion-input type="password" placeholder="请确认登录密码" value="" [formControl]="password2" clearInput="true"></ion-input>\n    </ion-item>\n    <button ion-button block color="secondary" type="submit" [disabled]="!registerForm.valid" style="margin-top: 40px;">注册</button>\n  </form>\n</ion-content>\n\n\x3c!-- 正确的 [disabled]="!username1.valid" --\x3e\n\n\x3c!-- 错误的 [disabled]="!username1.value.valid" --\x3e'}),l("design:paramtypes",[i.g,r.a,a.a,c.a,i.f,i.j])],h)},202:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),i=n(3),r=n(12),s=n(16),a=(n.n(s),n(14)),p=n(18),c=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){return function(){}}(),h=function(){function e(e,t,n,o,i,r){this.navCtrl=e,this.navParams=t,this.http=n,this.httpService=o,this.loading=i,this.toastCtrl=r,this.data=new l}return e.prototype.ionViewWillEnter=function(){var e=this;this.chagorderid=this.navParams.get("chagorderid");var t=window.global.config.user.userInfo.userid,n=window.global.config.user.userInfo.token,o=this.loading.create({content:"请稍后..."});o.present(),this.httpService.postRequest("/api/happyevadmin/charging/cycleQueryChagorderInfo.htm",{userid:t,token:n,chagorderid:this.chagorderid}).then(function(t){var n=t.header.code.toString(16);if(e.code=n.substr(n.length-2,2).toUpperCase(),"FF"==n.substr(n.length-2,2).toUpperCase())setTimeout(function(){e.data=t.body.chargeOrder,e.posts=t.body.tradelist,console.log(t),o.dismiss()},1e3);else if("FC"==n.substr(n.length-2,2).toUpperCase())o.dismiss();else{o.dismiss();var i=e.toastCtrl.create({message:t.header.info,duration:2e3,position:"top"});i.onDidDismiss(function(){e.navCtrl.pop()}),i.present()}})},e.prototype.goLogin=function(){this.navCtrl.push(p.a)},e}();h=c([Object(i.e)(),Object(o.n)({selector:"page-consumer-info",template:'\x3c!--\n  Generated template for the ConsumerInfoPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n\n</ion-header>\n\n\n<ion-content style="background:#f0eff5;">\n  <div *ngIf="code==\'FC\'" class="checkLogin"> \x3c!-- 两个ngIf的条件必须对应相等时才会显示效果 --\x3e\n    <p>您还未登录，请先登录</p>\n    <button ion-button block type="button" color="secondary" (click)="goLogin()">登录</button>\n  </div>\n\n  <div style="height:50px;width:100%;background:#fafafa;font-size:14px;color:#000000;" *ngIf="code!=\'FC\'">\n    <span style="line-height:50px;width:33.33%;display:block;text-align:center;float:left;">时段</span>\n    <span style="line-height:50px;width:33.33%;display:block;text-align:center;float:left;border-left:0.5px solid #cccccc;border-right:0.5px solid #cccccc;">价格(元)</span>\n    <span style="line-height:50px;width:33.33%;display:block;text-align:center;float:left;">金额(元)</span>\n  </div>\n\n  <div *ngIf="code==\'FF\'"> \x3c!-- 两个ngIf的条件必须对应相等时才会显示效果 --\x3e\n    \n    \x3c!-- <div [ngStyle]="{\'visibility\':code==\'FF\'?\'hidden\':\'visible\'}" style="position:absolute;top:0;right:0;bottom:0;left:0;z-index:999;background:#f0eff5;"></div> --\x3e\n\n    <ul style="list-style:none;padding-left:0;border-top:0.5px solid #dadada;margin:0;padding-top:15px;padding-bottom:50px;">\n      <li style="height:22px;font-size:12px;" *ngFor="let post of posts">\n        <span style="line-height:22px;width:33.33%;display:block;text-align:center;float:left;">{{post.starttime}}-{{post.endtime}}</span>\n        <span style="line-height:22px;width:33.33%;display:block;text-align:center;float:left;">{{post.chargingprice}}</span>\n        <span style="line-height:22px;width:33.33%;display:block;text-align:center;float:left;">{{post.fee}}</span>\n      </li>\n    </ul>\n  </div>\n\n  <div style="height:50px;width:100%;background:#fafafa;border-top:0.5px solid #dadada;position:fixed;left:0;bottom:0;" *ngIf="code!=\'FC\'">\n    <span style="display:block;float:right;line-height:50px;font-size:12px;margin-right:15px;padding-top:1.5px;">元</span>\n    <span style="display:block;float:right;line-height:50px;font-size:19px;">{{data.totalfee}}</span>\n    <span style="display:block;float:right;line-height:50px;font-size:12px;padding-top:1.5px;">消费总计:</span>  \n  </div>\n</ion-content>\n'}),d("design:paramtypes",[i.g,i.h,r.a,a.a,i.f,i.j])],h)},203:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n(0),i=n(3),r=n(12),s=n(16),a=(n.n(s),n(14)),p=n(18),c=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(e,t,n,o,i,r){this.navCtrl=e,this.navParams=t,this.http=n,this.httpService=o,this.loading=i,this.toastCtrl=r}return e.prototype.ionViewWillEnter=function(){var e=this;this.pipesn=this.navParams.get("pipesn"),this.md5=this.navParams.get("md5");var t=window.global.config.user.userInfo.userid,n=window.global.config.user.userInfo.token,o=this.loading.create({content:"请稍后..."});o.present(),void 0!==this.pipesn&&":pipesn"!==this.pipesn?this.httpService.postRequest("/api/happyevadmin/charging/inputPipesn.htm",{userid:t,token:n,pipesn:this.pipesn}).then(function(t){var n=t.header.code.toString(16);if(e.code=n.substr(n.length-2,2).toUpperCase(),"FF"==n.substr(n.length-2,2).toUpperCase())setTimeout(function(){e.posts=t.body.pricelist,console.log(t.body),o.dismiss()},1e3);else if("FC"==n.substr(n.length-2,2).toUpperCase())o.dismiss();else{o.dismiss();var i=e.toastCtrl.create({message:t.header.info,duration:2e3,position:"top"});i.onDidDismiss(function(){e.navCtrl.pop()}),i.present()}}):void 0!==this.md5&&":md5"!==this.md5&&this.httpService.postRequest("/api/happyevadmin/charging/scanPipeCode.htm",{userid:t,token:n,md5:this.md5}).then(function(t){var n=t.header.code.toString(16);if(e.code=n.substr(n.length-2,2).toUpperCase(),"FF"==n.substr(n.length-2,2).toUpperCase())setTimeout(function(){e.posts=t.body.pricelist,console.log(t.body),o.dismiss()},1e3);else if("FC"==n.substr(n.length-2,2).toUpperCase())o.dismiss();else{o.dismiss();var i=e.toastCtrl.create({message:t.header.info,duration:2e3,position:"top"});i.onDidDismiss(function(){e.navCtrl.pop()}),i.present()}})},e.prototype.goLogin=function(){this.navCtrl.push(p.a)},e}();l=c([Object(i.e)(),Object(o.n)({selector:"page-electricity-price",template:'\x3c!--\n  Generated template for the ElectricityPricePage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n\n</ion-header>\n\n\n<ion-content style="background:#f0eff5;">\n  <div *ngIf="code==\'FC\'" class="checkLogin"> \x3c!-- 两个ngIf的条件必须对应相等时才会显示效果 --\x3e\n    <p>您还未登录，请先登录</p>\n    <button ion-button block type="button" color="secondary" (click)="goLogin()">登录</button>\n  </div>\n  <div class="nav" *ngIf="code!=\'FC\'">\n    <span>时段</span>\n    <span>价格(元)</span>\n    \x3c!-- <span style="line-height:50px;width:33.33%;display:block;text-align:center;float:left;">金额(元)</span> --\x3e\n  </div>\n  <div *ngIf="code==\'FF\'"> \x3c!-- 两个ngIf的条件必须对应相等时才会显示效果 --\x3e\n  \n    \x3c!-- <div [ngStyle]="{\'visibility\':code==\'FF\'?\'hidden\':\'visible\'}" style="position:absolute;top:0;right:0;bottom:0;left:0;z-index:999;background:#f0eff5;"></div> --\x3e\n    \n    <ul class="content">\n      <li *ngFor="let post of posts">\n        <span>{{post.starttime}}-{{post.endtime}}</span>\n        <span>{{post.chargingprice}}</span>\n        \x3c!-- <span style="line-height:22px;width:33.33%;display:block;text-align:center;float:left;">2.5</span> --\x3e\n      </li>\n    </ul>\n  </div>\n</ion-content>\n'}),d("design:paramtypes",[i.g,i.h,r.a,a.a,i.f,i.j])],l)},205:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n(0),i=n(3),r=n(12),s=n(16),a=(n.n(s),n(14)),p=n(18),c=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(e,t,n,o,i,r,s){this.navCtrl=e,this.navParams=t,this.http=n,this.alertCtrl=o,this.httpService=i,this.loading=r,this.toastCtrl=s,this.realbalance=this.navParams.get("realbalance"),this.httpService.postRequest("/api/happyevadmin/utils/getWechatJsSign.htm",{currenturl:window.location.href}).then(function(e){wx.config({debug:!1,appId:e.body.appId,nonceStr:e.body.nonceStr,signature:e.body.signature,timestamp:e.body.timestamp,jsApiList:["chooseWXPay"]})})}return e.prototype.recharge=function(){var e=this,t=this.loading.create({content:"请稍后..."});t.present(),console.log("asdaf");var n=window.global.config.user.userInfo.userid,o=window.global.config.user.userInfo.token,i=window.global.config.user.openId,r=this;this.httpService.postRequest("/api/happyevadmin/recharge/requestRechargeParams.htm",{userid:n,token:o,openid:i,paytype:2,rechargefee:this.myInput}).then(function(i){t.dismiss(),console.log(i,i.body);var s=i.header.code.toString(16);if("FF"==s.substr(s.length-2,2).toUpperCase())wx.chooseWXPay({timestamp:i.body.rechargeParam.timeStamp,nonceStr:i.body.rechargeParam.nonceStr,package:i.body.rechargeParam.package,signType:i.body.rechargeParam.signType,paySign:i.body.rechargeParam.paySign,success:function(e){r.httpService.postRequest("/api/happyevadmin/recharge/queryRechagorderInfo.htm",{userid:n,token:o,rechagorderid:i.body.rechagorderid}).then(function(e){var t=e.header.code.toString(16);if("FF"==t.substr(t.length-2,2).toUpperCase())r.createtime=new Date(e.body.createtime).toLocaleString(),(n=r.alertCtrl.create({title:"充值成功",message:'\n                    <div style="text-align:left;background:red;">充值金额: <span>'+e.body.rechagfee+'</span></div>\n                    <div style="text-align:left;">账户金额: <span>'+e.body.balance+'</span></div>\n                    <div style="text-align:left;">充值时间: <span>'+r.createtime+'</span></div>\n                    <div style="text-align:left;">支付方式: <span>'+e.body.paytype+"</span></div>\n                  ",buttons:[{text:"确定",handler:function(){r.navCtrl.pop()}}]})).present();else{var n=r.alertCtrl.create({title:"充值异常",buttons:[{text:"确定",handler:function(){r.navCtrl.pop()}}]});n.present()}})}});else if("FB"==s.substr(s.length-2,2).toUpperCase())(a=e.toastCtrl.create({message:"请输入正确的充值金额",duration:2e3,position:"top"})).present();else if("FC"==s.substr(s.length-2,2).toUpperCase())(a=e.toastCtrl.create({message:"登陆错误,请重新登录",duration:2e3,position:"top"})).onDidDismiss(function(){e.navCtrl.push(p.a)}),a.present();else{var a=e.toastCtrl.create({message:i.header.info,duration:2e3,position:"top"});a.present()}})},e}();l=c([Object(i.e)(),Object(o.n)({selector:"page-account-balance",template:'\x3c!--\n  Generated template for the AccountBalancePage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n\n</ion-header>\n\n\n<ion-content style="background:#efefef;">\n  <ion-item style="margin-top:23px;border-top:1px solid #e5e5e5;">\n    <span style="display:block;float:left;">账户余额</span>\n    <span style="display:block;float:right;color:#888888;">{{realbalance}}元</span>\n  </ion-item>\n  <ion-item>\n    <ion-label>充值金额</ion-label>\n    <ion-input type="number" [(ngModel)]="myInput"  clearInput=true></ion-input>\n  </ion-item>\n  <div style="display:flex;justify-content: center;">\n    <button ion-button color="secondary" (click)="recharge()" style="margin-top:37px;background:#09ba07;width:137px;">确定</button>\n  </div>\n</ion-content>\n'}),d("design:paramtypes",[i.g,i.h,r.a,i.a,a.a,i.f,i.j])],l)},206:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),i=n(3),r=n(13),s=n(12),a=n(16),p=(n.n(a),n(14)),c=n(18),d=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t,n,o,i,s,a){this.navCtrl=e,this.formBuilder=t,this.navParams=n,this.http=o,this.httpService=i,this.loading=s,this.toastCtrl=a,this.phone=this.navParams.get("phone"),this.unbundleForm=t.group({username1:["",r.f.compose([r.f.minLength(11),r.f.maxLength(11),r.f.required,r.f.pattern("^(13[0-9]|15[012356789]|17[03678]|18[0-9]|14[57])[0-9]{8}$")])],verificationCode:["",r.f.compose([r.f.required,r.f.minLength(4)])]}),this.username1=this.unbundleForm.controls.username1,this.verificationCode=this.unbundleForm.controls.verificationCode}return e.prototype.unbundlePhone=function(){var e=this,t=this.loading.create({content:"请稍后..."});if(t.present(),"phone"==this.phone)if(this.username1.value){n=this.username1.value%this.username1.value.substring(1,4);console.log(n),this.httpService.postRequest("/api/happyevadmin/utils/getAuthcode.htm",{phone:this.username1.value,servicename:"bindNewPhone",checkcode:n}).then(function(n){var o=n.header.code.toString(16);if("FF"==o.substr(o.length-2,2).toUpperCase()){t.dismiss(),(r=e.toastCtrl.create({message:"短信验证码发送成功",duration:3e3})).present();var i=60;e.disabled=!0,e.timer=setInterval(function(){i--,document.getElementById("getCode").innerText=i+"秒后重试",i<=0&&(e.disabled=!1,document.getElementById("getCode").innerText="获取验证码",clearInterval(e.timer),i=60)},1e3)}else{t.dismiss();var r=e.toastCtrl.create({message:n.header.info,duration:3e3});r.present()}})}else t.dismiss(),this.toastCtrl.create({message:"请输入电话号码",duration:2e3,position:"top"}).present();else{var n=this.username1.value%this.username1.value.substring(1,4);console.log(n),this.httpService.postRequest("/api/happyevadmin/utils/getAuthcode.htm",{phone:this.username1.value,servicename:"unbindPhone",checkcode:n}).then(function(n){var o=n.header.code.toString(16);if("FF"==o.substr(o.length-2,2).toUpperCase()){t.dismiss();var i=60;e.disabled=!0,e.timer=setInterval(function(){i--,document.getElementById("getCode").innerText=i+"秒后重试",i<=0&&(e.disabled=!1,document.getElementById("getCode").innerText="获取验证码",clearInterval(e.timer),i=60)},1e3),(r=e.toastCtrl.create({message:"短信验证码发送成功",duration:3e3})).present()}else{t.dismiss();var r=e.toastCtrl.create({message:n.header.info,duration:3e3});r.present()}})}},e.prototype.ionViewWillLeave=function(){clearInterval(this.timer)},e.prototype.ionViewWillEnter=function(){this.readonly=!1,this.clearInput=!0,"phone"==this.phone?document.getElementById("sure").innerText="绑定":(this.iphone=this.phone,this.readonly=!0,this.clearInput=!1,document.getElementById("sure").innerText="解绑")},e.prototype.unbundle=function(e){var t=this,n=window.global.config.user.userInfo.userid,o=window.global.config.user.userInfo.token,i=this.loading.create({content:"请稍后..."});i.present(),"phone"==this.phone?this.httpService.postRequest("/api/happyevadmin/account/bindNewCCUPhone.htm",{userid:n,token:o,newphone:this.username1.value,authcode:this.verificationCode.value}).then(function(e){var n=e.header.code.toString(16);if("FF"==n.substr(n.length-2,2).toUpperCase())i.dismiss(),(o=t.toastCtrl.create({message:"绑定成功",duration:2e3,position:"top"})).onDidDismiss(function(){t.navCtrl.pop()}),o.present();else if("FC"==n.substr(n.length-2,2).toUpperCase())i.dismiss(),(o=t.toastCtrl.create({message:"登陆错误,请重新登录",duration:2e3,position:"top"})).onDidDismiss(function(){t.navCtrl.push(c.a)}),o.present();else{i.dismiss();var o=t.toastCtrl.create({message:e.header.info,duration:3e3});o.present()}}):this.httpService.postRequest("/api/happyevadmin/account/unbindCCUPhone.htm",{userid:n,token:o,phone:this.username1.value,authcode:this.verificationCode.value}).then(function(e){var n=e.header.code.toString(16);if("FF"==n.substr(n.length-2,2).toUpperCase())i.dismiss(),(o=t.toastCtrl.create({message:"解绑成功",duration:2e3,position:"top"})).onDidDismiss(function(){t.navCtrl.pop()}),o.present();else if("FC"==n.substr(n.length-2,2).toUpperCase())i.dismiss(),(o=t.toastCtrl.create({message:"登陆错误,请重新登录",duration:2e3,position:"top"})).onDidDismiss(function(){t.navCtrl.push(c.a)}),o.present();else{i.dismiss();var o=t.toastCtrl.create({message:e.header.info,duration:3e3});o.present()}})},e}();h=d([Object(i.e)(),Object(o.n)({selector:"page-unbundle-phone",template:'\x3c!--\n  Generated template for the UnbundlePhonePage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n\n</ion-header>\n\n\n<ion-content padding style="background:#696969">\n  \x3c!-- <div [ngStyle]="{\'visibility\':code==\'FC\'?\'visible\':\'hidden\'}" class="checkLogin"> 两个ngIf的条件必须对应相等时才会显示效果\n    <p>您还未登录，请先登录</p>\n    <button ion-button block type="button" color="secondary" (click)="goLogin()">登录</button>\n  </div> --\x3e\n  \x3c!-- <div *ngIf="code==\'FF\'"> 两个ngIf的条件必须对应相等时才会显示效果 --\x3e\n    <form [formGroup]="unbundleForm" (ngSubmit)="unbundle(unbundleForm.value)">\n      <ion-item style="margin-top:86px;padding-left:16px;">\n        <ion-input type="tel" placeholder="请输入手机号码" value="" [formControl]="username1" [clearInput]="clearInput" [readonly]="readonly" [(ngModel)]="iphone"></ion-input>\n      </ion-item>\n      <ion-item style="margin-top:20px;margin-bottom:45px;width: 58%;float: left; padding-left:16px;">\n        <ion-input type="number" placeholder="请输入验证码" value="" [formControl]="verificationCode" clearInput="true" ></ion-input>  \n      </ion-item>\n      <ion-item style="margin-top:20px;margin-bottom:45px;width: 38%;float: right;background: #dadada;text-align:center;">\n        <button type="button" color="Light" id="getCode" [disabled]="disabled" (click)="unbundlePhone()" style="color: #007aff; font-size: 16px;">获取验证码</button>\n      </ion-item>\n      <button ion-button block color="secondary" type="submit" [disabled]="!unbundleForm.valid" id="sure">确定</button>\n    </form>\n  \x3c!-- </div> --\x3e\n</ion-content>\n'}),l("design:paramtypes",[i.g,r.a,i.h,s.a,p.a,i.f,i.j])],h)},207:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),i=n(3),r=n(105),s=n(18),a=n(12),p=n(16),c=(n.n(p),n(14)),d=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t,n,o,i,r){this.navCtrl=e,this.navParams=t,this.http=n,this.httpService=o,this.loading=i,this.toastCtrl=r,this.items=[],this.num=0,this.loadMore=!0}return e.prototype.doRefresh=function(e){var t=this,n=window.global.config.user.userInfo.userid,o=window.global.config.user.userInfo.token;this.items=[],setTimeout(function(){t.httpService.postRequest("/api/happyevadmin/charging/queryChagorderList.htm",{userid:n,token:o}).then(function(e){var n=e.header.code.toString(16);if(t.code=n.substr(n.length-2,2).toUpperCase(),"FF"==n.substr(n.length-2,2).toUpperCase()){t.posts=e.body,console.log(e,e.body);for(var o=0,i=t.posts;o<i.length;o++){var r=i[o];t.items.push(r)}for(var s=0,a=t.items;s<a.length;s++)(d=a[s]).pipepn?d.pn=d.pipepn:d.pn=d.pipesn;for(var p=0,c=t.items;p<c.length;p++){var d=c[p],l=new Date(d.startDate).toLocaleString();d.starttime=l.substr(0,l.length-3)}for(var h=0,u=t.items;h<u.length;h++){var d=u[h],l=new Date(d.endDate).toLocaleString();d.endtime=l.substr(0,l.length-3)}}}),e.complete()},1e3)},e.prototype.doInfinite=function(e){var t=this,n=window.global.config.user.userInfo.userid,o=window.global.config.user.userInfo.token;console.log("Begin async operation"),this.num++,setTimeout(function(){t.httpService.postRequest("/api/happyevadmin/charging/queryChagorderList.htm",{userid:n,token:o,offset:4*t.num,pagesize:5}).then(function(e){if(e.body){if(t.posts=e.body,console.log(e,e.body,20*t.num),5==t.posts.length){t.posts.pop();for(var n=0,o=t.posts;n<o.length;n++){s=o[n];t.items.push(s)}}else{t.loadMore=!1;for(var i=0,r=t.posts;i<r.length;i++){var s=r[i];t.items.push(s)}}for(var a=0,p=t.items;a<p.length;a++)(l=p[a]).pipepn?l.pn=l.pipepn:l.pn=l.pipesn;for(var c=0,d=t.items;c<d.length;c++){var l=d[c],h=new Date(l.startDate).toLocaleString();l.starttime=h.substr(0,h.length-3)}for(var u=0,g=t.items;u<g.length;u++){var l=g[u],h=new Date(l.endDate).toLocaleString();l.endtime=h.substr(0,h.length-3)}}else{var f=e.header.code.toString(16);"FC"==f.substr(f.length-2,2).toUpperCase()&&(t.code=f.substr(f.length-2,2).toUpperCase())}}),e.complete()},500)},e.prototype.ionViewWillEnter=function(){var e=this,t=window.global.config.user.userInfo.userid,n=window.global.config.user.userInfo.token,o=this.loading.create({content:"请稍后..."});o.present(),this.httpService.postRequest("/api/happyevadmin/charging/queryChagorderList.htm",{userid:t,token:n,pagesize:5}).then(function(t){var n=t.header.code.toString(16);if(e.code=n.substr(n.length-2,2).toUpperCase(),"FF"==n.substr(n.length-2,2).toUpperCase()){if(o.dismiss(),e.header=t.header,e.posts=t.body,5==e.posts.length){e.posts.pop();for(var i=0,r=e.posts;i<r.length;i++){p=r[i];e.items.push(p)}}else{e.loadMore=!1;for(var s=0,a=e.posts;s<a.length;s++){var p=a[s];e.items.push(p)}}for(var c=0,d=e.items;c<d.length;c++)(u=d[c]).pipepn?u.pn=u.pipepn:u.pn=u.pipesn;for(var l=0,h=e.items;l<h.length;l++){var u=h[l],g=new Date(u.startDate).toLocaleString();u.starttime=g.substr(0,g.length-3)}for(var f=0,m=e.items;f<m.length;f++){var u=m[f],g=new Date(u.endDate).toLocaleString();u.endtime=g.substr(0,g.length-3)}}else if("FC"==n.substr(n.length-2,2).toUpperCase())o.dismiss();else if("00"==n.substr(n.length-2,2))o.dismiss();else{o.dismiss();var v=e.toastCtrl.create({message:t.header.info,duration:2e3,position:"top"});v.onDidDismiss(function(){e.navCtrl.pop()}),v.present()}})},e.prototype.goLogin=function(){this.navCtrl.push(s.a)},e.prototype.goOrderDetail=function(e){this.historyOrder=this.items[e].chagorderid,this.navCtrl.push(r.a,{historyOrder:this.historyOrder})},e}();h=d([Object(i.e)(),Object(o.n)({selector:"page-order-history",template:'\x3c!--\n  Generated template for the OrderHistoryPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n\n</ion-header>\n\n\n<ion-content style="background:#f0eff5;">\n    <ion-refresher (ionRefresh)="doRefresh($event)">\n             <ion-refresher-content\n               pullingIcon="arrow-dropdown"\n               pullingText="获取最新数据..."\n               refreshingSpinner="circles"\n               refreshingText="下拉刷新...">\n             </ion-refresher-content>\n  </ion-refresher>\n  \n  <div *ngIf="code==\'FC\'" class="checkLogin"> \x3c!-- 两个ngIf的条件必须对应相等时才会显示效果 --\x3e\n    <p>您还未登录，请先登录</p>\n    <button ion-button block type="button" color="secondary" (click)="goLogin()">登录</button>\n  </div>\n  <div *ngIf="code==\'00\'"><p style="text-align:center;font-size:14px;">没有相关订单哟~</p></div>\n  <div *ngIf="code==\'FF\'"> \x3c!-- 两个ngIf的条件必须对应相等时才会显示效果 --\x3e\n\n    \x3c!-- <div [ngStyle]="{\'visibility\':posts?\'hidden\':\'visible\'}" style="position:absolute;top:0;right:0;bottom:0;left:0;z-index:999;background:#f0eff5;"></div> --\x3e\n    \n    <ul>\n      <li  *ngFor="let post of items;let i = index;" (click)="goOrderDetail(i)">    \n        <div>\n          <span>开始时间：</span>\n          <span>{{post[\'starttime\']}}</span>\n        </div>\n        <div>\n          <span>结束时间：</span>\n          <span>{{post[\'endtime\']}}</span>\n        </div>\n        <div>\n          <span>充电电量：</span>\n          <span>{{post[\'totalpower\']}}kwh</span>\n        </div>\n        <div>\n          <span>消费金额：</span>\n          <span>{{post[\'totalfee\']}}元</span>\n        </div>\n        <div>\n          <span>充电站点：</span>\n          <span>{{post[\'stationname\']}}</span>\n        </div>\n        <div>\n          <span>电桩编码：</span>\n          <span>{{ post[\'pn\']}}</span>\n        </div>\n        <div>\n          <span>当前余额：</span>\n          <span>{{ post[\'currentBalance\']}}元</span>\n        </div>\n      </li>\n    </ul>\n    <div *ngIf="!loadMore" style="text-align:center;">拉到底啦...</div>\n  </div>\n\n  <ion-infinite-scroll (ionInfinite)="doInfinite($event)" [enabled]="loadMore">\n      <ion-infinite-scroll-content\n        loadingSpinner="bubbles"\n        loadingText="正在加载更多数据...">\n      </ion-infinite-scroll-content>\n    </ion-infinite-scroll>\n</ion-content>\n\n\x3c!-- [threshold]="\'10%\'" --\x3e\n\n\x3c!-- {{post.startYear}}-{{post.startMonth}}-{{post.startDay}}&nbsp;&nbsp;{{post.startHour}}:{{post.startMinute}} --\x3e\n\x3c!-- {{post.endYear}}-{{post.endMonth}}-{{post.endDay}}&nbsp;&nbsp;{{post.endHour}}:{{post.endMinute}} --\x3e\n'}),l("design:paramtypes",[i.g,i.h,a.a,c.a,i.f,i.j])],h)},208:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(209),i=n(227);Object(o.a)().bootstrapModule(i.a)},227:function(e,t,n){"use strict";n.d(t,"a",function(){return F});var o=n(30),i=n(0),r=n(3),s=n(195),a=n(198),p=n(13),c=n(12),d=n(14),l=n(277),h=n(18),u=n(199),g=n(281),f=n(201),m=n(103),v=n(104),b=n(202),y=n(203),C=n(282),x=n(283),w=n(207),I=n(205),k=n(206),R=n(105),S=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},F=function(){return function(){}}();F=S([Object(i.L)({declarations:[l.a,h.a,u.a,g.a,f.a,m.a,v.a,b.a,y.a,C.a,x.a,w.a,I.a,k.a,R.a],imports:[o.a,p.b,c.b,r.d.forRoot(l.a,{},{links:[{component:u.a,name:"Input",segment:"input"},{component:g.a,name:"ScanCode",segment:"scanCode"},{component:h.a,name:"Login",segment:"login"},{component:m.a,name:"Charge",segment:"charge/:pipesn/:md5"},{component:v.a,name:"ChargeState",segment:"chargeState/:chagorderid/:chargeOrder"},{component:f.a,name:"Register",segment:"register"},{component:b.a,name:"ConsumerInfo",segment:"consumerInfo/:chagorderid"},{component:y.a,name:"ElectricityPrice",segment:"electricityPrice/:pipesn/:md5"},{component:C.a,name:"ChargeOrder",segment:"chargeOrder"},{component:x.a,name:"Mine",segment:"mine"},{component:w.a,name:"OrderHistory",segment:"orderHistory"},{component:I.a,name:"AccountBalance",segment:"accountBalance/:realbalance"},{component:k.a,name:"UnbundlePhone",segment:"unbundlePhone/:phone"},{component:R.a,name:"OrderDetail",segment:"orderDetail/:chagorderid/:historyOrder"}]})],bootstrap:[r.b],entryComponents:[l.a,h.a,u.a,g.a,f.a,m.a,v.a,b.a,y.a,C.a,x.a,w.a,I.a,k.a,R.a],providers:[d.a,a.a,s.a,{provide:i.v,useClass:r.c}]})],F)},277:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(0),i=n(3),r=n(198),s=n(195),a=n(199),p=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){return function(e,t,n){this.rootPage=a.a,e.ready().then(function(){})}}();d=p([Object(o.n)({template:'<ion-nav [root]="rootPage"></ion-nav>\n'}),c("design:paramtypes",[i.i,r.a,s.a])],d)},281:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),i=n(3),r=n(204),s=(n.n(r),n(103)),a=n(12),p=n(16),c=(n.n(p),n(14)),d=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t,n,o){this.navCtrl=e,this.navParams=t,this.http=n,this.httpService=o}return e.prototype.ionViewWillEnter=function(){var e=this;this.httpService.postRequest("/api/happyevadmin/utils/getWechatJsSign.htm",{currenturl:"http://wxcdtest.happyev.com/spa/index?return=scanCode#/scanCode"}).then(function(t){console.log(t,t.body),wx.config({debug:!1,appId:t.body.appId,nonceStr:t.body.nonceStr,signature:t.body.signature,timestamp:t.body.timestamp,jsApiList:["scanQRCode","chooseWXPay"]});var n=e;wx.ready(function(){wx.scanQRCode({needResult:1,scanType:["qrCode","barCode"],success:function(e){var t=e.resultStr;n.md5=new r.Buffer(t,"base64").toString().substr(17),n.navCtrl.push(s.a,{md5:n.md5})}})})})},e.prototype.goScan=function(){var e=this;this.httpService.postRequest("/api/happyevadmin/utils/getWechatJsSign.htm",{currenturl:"http://wxcdtest.happyev.com/spa/index?return=scanCode#/scanCode"}).then(function(t){console.log(t,t.body),wx.config({debug:!1,appId:t.body.appId,nonceStr:t.body.nonceStr,signature:t.body.signature,timestamp:t.body.timestamp,jsApiList:["scanQRCode","chooseWXPay"]});var n=e;wx.ready(function(){wx.scanQRCode({needResult:1,scanType:["qrCode","barCode"],success:function(e){var t=e.resultStr;n.md5=new r.Buffer(t,"base64").toString().substr(17),n.navCtrl.push(s.a,{md5:n.md5})}})})})},e}();h=d([Object(i.e)(),Object(o.n)({selector:"page-scan-code",template:'\x3c!--\n  Generated template for the ScanCodePage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n\n</ion-header>\n\n\n<ion-content padding>\n  \x3c!-- <div *ngIf="!userInfo" class="checkLogin">\n    <p>您还未登录，请先登录</p>\n    <button ion-button block type="button" color="secondary" (click)="goLogin()">登录</button>\n  </div> --\x3e\n  \x3c!-- <button ion-button block type="button" color="secondary" (click)="goScan()">扫一扫</button> --\x3e\n</ion-content>\n'}),l("design:paramtypes",[i.g,i.h,a.a,c.a])],h)},282:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var o=n(0),i=n(3),r=n(18),s=n(104),a=n(12),p=n(16),c=(n.n(p),n(14)),d=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t,n,o,i,r){this.navCtrl=e,this.navParams=t,this.http=n,this.httpService=o,this.loading=i,this.toastCtrl=r}return e.prototype.ionViewWillEnter=function(){var e=this;if(this.userInfo=window.global.config.user.userInfo,this.userInfo){var t=window.global.config.user.userInfo.userid,n=window.global.config.user.userInfo.token,o=this.loading.create({content:"请稍后..."});o.present(),this.httpService.postRequest("/api/happyevadmin/charging/queryChargingOrder.htm",{userid:t,token:n}).then(function(t){e.header=t.header;var n=t.header.code.toString(16);if(e.code=n.substr(n.length-2,2).toUpperCase(),"FC"==n.substr(n.length-2,2).toUpperCase())o.dismiss();else if("FF"==n.substr(n.length-2,2).toUpperCase()){e.posts=t.body;for(var i=0,r=e.posts;i<r.length;i++){var s=r[i],a=s.chargingtime;s.hour=Math.floor(a/60),s.minute=Math.floor(a-60*Math.floor(a/60))}o.dismiss()}else if("00"==n.substr(n.length-2,2))o.dismiss();else{o.dismiss();var p=e.toastCtrl.create({message:t.header.info,duration:2e3,position:"top"});p.onDidDismiss(function(){e.navCtrl.pop()}),p.present()}})}},e.prototype.doRefresh=function(e){var t=this;setTimeout(function(){var n=window.global.config.user.userInfo.userid,o=window.global.config.user.userInfo.token;t.httpService.postRequest("/api/happyevadmin/charging/queryChargingOrder.htm",{userid:n,token:o}).then(function(e){var n=e.header.code.toString(16);if(t.code=n.substr(n.length-2,2).toUpperCase(),"FF"==n.substr(n.length-2,2).toUpperCase()){t.posts=e.body;for(var o=0,i=t.posts;o<i.length;o++){var r=i[o],s=r.chargingtime;r.hour=Math.floor(s/60),r.minute=Math.floor(s-60*Math.floor(s/60))}}}),e.complete()},1e3)},e.prototype.goLogin=function(){this.navCtrl.push(r.a)},e.prototype.goChargeState=function(e){this.chargeOrder=this.posts[e].chagorderid,this.navCtrl.push(s.a,{chargeOrder:this.chargeOrder})},e}();h=d([Object(i.e)(),Object(o.n)({selector:"page-charge-order",template:'\x3c!--\n  Generated template for the ChargeOrderPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n\n</ion-header>\n\n\n<ion-content style="background:#efefef;">\n\n  <ion-refresher (ionRefresh)="doRefresh($event)">\n    <ion-refresher-content\n      pullingIcon="arrow-dropdown"\n      pullingText="Pull to refresh"\n      refreshingSpinner="circles"\n      refreshingText="下拉刷新...">\n    </ion-refresher-content>     \n  </ion-refresher>\n  \n  <div *ngIf="!userInfo || code==\'FC\'" class="checkLogin"> \x3c!-- 两个ngIf的条件必须对应相等时才会显示效果 --\x3e\n    <p>您还未登录，请先登录</p>\n    <button ion-button block type="button" color="secondary" (click)="goLogin()">登录</button>\n  </div>\n  <div *ngIf="userInfo && code==\'00\'"><p style="text-align:center;font-size:14px;">没有相关订单哟~</p></div>\n  <div *ngIf="userInfo && code==\'FF\'"> \x3c!-- 两个ngIf的条件必须对应相等时才会显示效果 --\x3e\n\n    <div [ngStyle]="{\'visibility\':header?\'hidden\':\'visible\'}" style="position:absolute;top:0;right:0;bottom:0;left:0;z-index:999;background:#f0eff5;"></div>\n \n  \n    <ul>\n      <li *ngFor="let post of posts;let i = index;" (click)="goChargeState(i)">\n        <span style="display:block;float:left;text-align:center;line-height:94px;width:30%;font-size:23px;color:#000000">{{post[\'realsoc\']}}%</span>\n        <div style="float:left;width:70%;font-size:15px;color:#000000;padding-left:3.5%;">\n          <span style="display:block;margin-top:6px;line-height:27px;">充电时间：{{post[\'hour\']}}小时{{post[\'minute\']}}分钟</span>\n          <span style="display:block;line-height:27px;">消费金额：{{post[\'totalfee\']}}</span>\n          <span style="display:block;line-height:27px;">电桩编码：{{post[\'pipepn\']}}</span>\n        </div>\n      </li>\n    </ul>\n  </div>\n</ion-content>\n'}),l("design:paramtypes",[i.g,i.h,a.a,c.a,i.f,i.j])],h)},283:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n(0),i=n(3),r=n(205),s=n(206),a=n(207),p=n(18),c=n(12),d=n(16),l=(n.n(d),n(14)),h=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g=function(){return function(){}}(),f=function(){function e(e,t,n,o,i,r){this.navCtrl=e,this.navParams=t,this.http=n,this.httpService=o,this.loading=i,this.toastCtrl=r,this.data=new g}return e.prototype.ionViewWillEnter=function(){var e=this;if(this.userInfo=window.global.config.user.userInfo,this.userInfo){var t=this.loading.create({content:"请稍后..."});t.present();var n=window.global.config.user.userInfo.userid,o=window.global.config.user.userInfo.token;this.httpService.postRequest("/api/happyevadmin/account/queryCCUInfo.htm",{userid:n,token:o}).then(function(n){var o=n.header.code.toString(16);if(e.code=o.substr(o.length-2,2).toUpperCase(),"FC"==o.substr(o.length-2,2).toUpperCase())t.dismiss();else if("FF"==o.substr(o.length-2,2).toUpperCase())setTimeout(function(){e.header=n.header,e.posts=n.body,e.data=n.body,e.realbalance=n.body.realbalance,t.dismiss(),n.body.phone?e.phone=n.body.phone:e.phone="phone"},1e3);else{t.dismiss();var i=e.toastCtrl.create({message:n.header.info,duration:3e3});i.onDidDismiss(function(){e.navCtrl.pop()}),i.present()}})}},e.prototype.goLogin=function(){this.navCtrl.push(p.a)},e.prototype.goAccount=function(){this.navCtrl.push(r.a,{realbalance:this.realbalance})},e.prototype.goUnbundle=function(){this.navCtrl.push(s.a,{phone:this.phone})},e.prototype.goHistory=function(){this.navCtrl.push(a.a)},e}();f=h([Object(i.e)(),Object(o.n)({selector:"page-mine",template:'\x3c!--\n  Generated template for the MinePage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n--\x3e\n<ion-header>\n\n</ion-header>\n\n\n<ion-content style="background:#efefef;">\n  <div *ngIf="!userInfo || code==\'FC\'" class="checkLogin"> \x3c!-- 两个ngIf的条件必须对应相等时才会显示效果 --\x3e\n    <p>您还未登录，请先登录</p>\n    <button ion-button block type="button" color="secondary" (click)="goLogin()">登录</button>\n  </div>\n  <div *ngIf="userInfo && code==\'FF\'"> \x3c!-- 两个ngIf的条件必须对应相等时才会显示效果 --\x3e\n    <div [ngStyle]="{\'visibility\':posts && header?\'hidden\':\'visible\'}" style="position:absolute;top:0;right:0;bottom:0;left:0;z-index:999;background:#f0eff5;"></div>\n\n    <div class="picture">\n      <div><img [src]="data.photo"/></div>\n      <div>\n        <span>{{data.nickname}}</span>\n        <span>{{data.username}}</span>\n      </div>\n      \x3c!-- <a><ion-icon name="arrow-forward"></ion-icon></a> --\x3e\n    </div>\n    <ul>\n      <li (click)="goAccount()">\n        <span>账户余额</span>\n        <span>（{{data.realbalance}}元）</span>\n        <a><ion-icon name="arrow-forward"></ion-icon></a>\n      </li>\n      <li (click)="goUnbundle()">\n        <span>手机绑定</span>\n        <a><ion-icon name="arrow-forward"></ion-icon></a>\n      </li>\n      <li (click)="goHistory()">\n          <span>历史订单</span>\n          <a><ion-icon name="arrow-forward"></ion-icon></a>\n      </li>\n    </ul>\n</div>\n</ion-content>\n\x3c!-- <a style="font-size:14px;color:#c7c6cb;display:block;float:right;margin-right:16px;margin-top:13.5px;width:18px;padding-left:11px;"><ion-icon name="arrow-forward"></ion-icon></a> --\x3e\n'}),u("design:paramtypes",[i.g,i.h,c.a,l.a,i.f,i.j])],f)}},[208]);